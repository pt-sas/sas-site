function checkRight(){return $(".tb_product thead th").length>15?1:0}function checkLeft(){return $(".tb_product thead th").length>15?3:0}function reloadTable(){$(".tb_display").length>0&&_table.ajax.reload(null,!1),$(".tb_product").length>0&&_tablePro.ajax.reload(null,!1)}function Edit(e){let t,a;if(ID=e,cardMain.length>0){cardMain.css("display","none"),cardForm.css("display","block");const e=cardForm.closest(".container");if(cardForm.prop("classList").contains("modal"))cardMain.css("display","block"),cardForm.css("display","none"),a=cardForm.prop("classList"),t=cardForm.find("form");else{cardBtn.css("display","block");const n=cardForm.closest(".card"),o=n.find(".card-header").find("button"),i=e.find(".page-header");ul=i.find("ul.breadcrumbs"),ul.find("li.nav-item > a").attr("href",SITE_URL);let r='<li class="separator"><i class="flaticon-right-arrow"></i></li>';r+='<li class="nav-item"><a class="text-primary font-weight-bold">Update</a></li>',ul.append(r),$.each(o,function(){const e=this.classList;e.contains("new_form")&&$(this).hide()}),a=cardForm.prop("classList"),t=cardForm.find("form")}}else openModalForm(),Scrollmodal(),t=modalForm.find("form"),a=cardForm.prop("classList");const n=t.find("input, textarea, select");let o=SITE_URL+SHOW+ID;setSave="update",$.ajax({url:o,type:"GET",cache:!1,dataType:"JSON",beforeSend:function(){$(".save_form").attr("disabled",!0),$(".x_form").attr("disabled",!0),$(".close_form").attr("disabled",!0),loadingForm(t.prop("id"),"facebook")},complete:function(){$(".save_form").removeAttr("disabled"),$(".x_form").removeAttr("disabled"),$(".close_form").removeAttr("disabled"),hideLoadingForm(t.prop("id"))},success:function(e){for(let o=0;o<e.length;o++)if(t.find("table.tb_tree").length>0){const n=t.find("table.tb_tree"),i=n.find("td input:checkbox");let r=Object.keys(e[o]),l=Object.values(e[o]);$.each(i,function(t,a){"parent"===$(a).attr("data-menu")?e[o].sys_menu_id==$(a).val()&&0==e[o].sys_submenu_id&&("Y"==e[o].isview&&"isview"===$(a).attr("name")||"Y"==e[o].iscreate&&"iscreate"===$(a).attr("name")||"Y"==e[o].isupdate&&"isupdate"===$(a).attr("name")||"Y"==e[o].isdelete&&"isdelete"===$(a).attr("name")?$(a).prop("checked",!0):$(a).prop("checked",!1),$(a).attr("id",e[o].sys_access_menu_id)):e[o].sys_submenu_id===$(a).val()&&("Y"==e[o].isview&&"isview"===$(a).attr("name")||"Y"==e[o].iscreate&&"iscreate"===$(a).attr("name")||"Y"==e[o].isupdate&&"isupdate"===$(a).attr("name")||"Y"==e[o].isdelete&&"isdelete"===$(a).attr("name")?$(a).prop("checked",!0):$(a).prop("checked",!1),$(a).attr("id",e[o].sys_access_menu_id))}),$.each(r,function(e,n){t.find("input:text[name="+n+"], textarea[name="+n+"]").val(l[e]),"isactive"===n&&"Y"===l[e]?(t.find("input:checkbox[name="+n+"]").prop("checked",!0),readonly(t,!1)):"isactive"===n&&"N"===l[e]&&(t.find("input:checkbox[name="+n+"]").removeAttr("checked"),readonly(t,!0)),a.contains("modal")&&"name"===n?modalTitle.html(capitalize(l[e])):"name"===n&&cardTitle.html(capitalize(l[e]))})}else{let i=e[o].field,r=e[o].label;a.contains("modal")&&"title"===i?modalTitle.html(capitalize(r)):"title"===i&&cardTitle.html(capitalize(r));for(let e=0;e<n.length;e++)if(""!==n[e].name&&n[e].name===i){let a=n[e].className.split(/\s+/);if(t.find("input:text[name="+n[e].name+"], textarea[name="+n[e].name+"]").val(r),(t.find("textarea.summernote[name="+n[e].name+"]").length>0||t.find("textarea.summernote-product[name="+n[e].name+"]").length>0)&&$("[name ="+n[e].name+"]").summernote("code",r),"select-one"===n[e].type){let a=n[e].name,o=r;option.push({fieldName:a,value:o}),t.find("select[name="+n[e].name+"]").val(r).change()}"checkbox"===n[e].type&&"Y"===r?(t.find("input:checkbox[name="+n[e].name+"]").prop("checked",!0),a.includes("active")&&readonly(t,!1)):(t.find("input:checkbox[name="+n[e].name+"]").removeAttr("checked"),a.includes("active")&&readonly(t,!0)),"radio"==n[e].type&&n[e].value==r&&(n[e].checked=!0),"file"===n[e].type&&a.includes("control-upload-image")&&previewImage(t.find("input[name="+n[e].name+"]")[0],"",r)}}$("html, body").animate({scrollTop:$(".main-panel").offset().top},500)},error:function(e,t){showError(e,t)}})}function Destroy(e){let t=SITE_URL+DELETE+e;Swal.fire({title:"Delete?",text:"Are you sure you wish to delete the selected data ? ",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Okay",cancelButtonText:"Close",reverseButtons:!0}).then(e=>{e.value&&$.post(t,function(e){Swal.fire({title:"Deleted!",text:"Your data has been deleted.",type:"success",showConfirmButton:!1,timer:1e3}),reloadTable()}).fail(function(e,t,a){console.info(a),reloadTable()})})}function arrContains(e,t){var a=null;for(let o=0;o<t.length;o++){var n=t[o];if(n.toString().toLowerCase()===e.toString().toLowerCase()){a=n;break}}return a}function errorForm(e,t){const a=e.find('input[type="text"], select, textarea'),n=e.find("small");let o=[],i=[];for(let e=0;e<n.length;e++)""!==n[e].id&&i.push(n[e].id);for(let e=0;e<a.length;e++)o.push(a[e].name);for(let a=0;a<t.length;a++){let n=t[a].error,r=t[a].field,l=t[a].label,s=arrContains(n,i),d=arrContains(r,o);""!==l&&a>0?(e.find("small[id="+s+"]").html(l),e.find("input:text[name="+d+"], select[name="+d+"], textarea[name="+d+"]").parent("div").addClass("has-error")):(e.find("small[id="+s+"]").html(""),e.find("input:text[name="+d+"], select[name="+d+"], textarea[name="+d+"]").parent("div").removeClass("has-error"))}}function clearForm(e){const t=$(e.target).closest(".row"),a=t.find("form"),n=a.find("input, textarea, select"),o=a.find("small");a[0].reset();for(let e=0;e<n.length;e++)if(""!==n[e].name){let t=$(n[e]).find("option:selected");a.find("input[name="+n[e].name+"], textarea[name="+n[e].name+"]").removeAttr("readonly").parent("div").removeClass("has-error"),a.find("input:checkbox[name="+n[e].name+"]").removeAttr("disabled"),t.length>0&&""!==t.val()&&"add"==setSave?a.find("select[name="+n[e].name+"]").val(t.val()).change().removeAttr("disabled").parent("div").removeClass("has-error"):a.find("select[name="+n[e].name+"]").val(null).change().removeAttr("disabled").parent("div").removeClass("has-error"),"file"==n[e].type&&$(".close-img").click(),(a.find("textarea.summernote[name="+n[e].name+"]").length>0||a.find("textarea.summernote-product[name="+n[e].name+"]").length>0)&&($("[name ="+n[e].name+"]").summernote("reset"),$("[name ="+n[e].name+"]").summernote("enable"))}for(let e=0;e<o.length;e++)""!==o[e].id&&a.find("small[id="+o[e].id+"]").html("")}function readonly(e,t){const a=e.find("input, textarea, select");for(let n=0;n<a.length;n++)if(""!==a[n].name){let o=a[n].className.split(/\s+/);e.find("input:text[name="+a[n].name+"], textarea[name="+a[n].name+"]").prop("readonly",t),"text"===a[n].type||o.includes("active")||e.find("input:checkbox[name="+a[n].name+"], select[name="+a[n].name+"], input:radio[name="+a[n].name+"]").prop("disabled",t),"file"===a[n].type&&e.find("input[name="+a[n].name+"]").prop("disabled",t),(e.find("textarea.summernote[name="+a[n].name+"]").length>0||e.find("textarea.summernote-product[name="+a[n].name+"]").length>0)&&(t?$("[name ="+a[n].name+"]").summernote("disable"):$("[name ="+a[n].name+"]").summernote("enable"))}e.find("button.close-img").length>0&&(e.find("button.close-img").prop("disabled",t),t?e.find("button.close-img").css("display","none"):e.find("button.close-img").css("display","block"))}function previewImage(e,t,a){let n=e.closest("label");if(t=t||".img-result",a=null==a?"":a,e.files&&e.files[0]){let a=new FileReader;a.onload=function(e){loadingForm(n.id,"pulse"),$(".save_form").attr("disabled",!0),$(".x_form").attr("disabled",!0),$(".close_form").attr("disabled",!0),setTimeout(function(){$(t).attr("src",e.target.result).width("auto").height(150),$(".form-upload-foto").css("display","none"),$(".form-result").css("display","block"),hideLoadingForm(n.id),$(".save_form").removeAttr("disabled"),$(".x_form").removeAttr("disabled"),$(".close_form").removeAttr("disabled")},2500)},a.readAsDataURL(e.files[0])}else""!==a?(a=ORI_URL+"/"+a,$.ajax({url:a,type:"HEAD",error:function(){$(t).attr("src","").width("auto").height(150),$(".form-upload-foto").css("display","block"),$(".form-result").css("display","none")},success:function(){loadingForm(n.id,"pulse"),$(".save_form").attr("disabled",!0),$(".x_form").attr("disabled",!0),$(".close_form").attr("disabled",!0),setTimeout(function(){$(t).attr("src",a).width("auto").height(150),$(".form-upload-foto").css("display","none"),$(".form-result").css("display","block"),hideLoadingForm(n.id),$(".save_form").removeAttr("disabled"),$(".x_form").removeAttr("disabled"),$(".close_form").removeAttr("disabled")},500)}})):($(t).attr("src","").width("auto").height(150),$(".form-upload-foto").css("display","block"),$(".form-result").css("display","none"))}function showError(e,t){let a="";a=0===e.status?"Not connect.\n Verify Network.":404==e.status?"Requested page not found. [404]":500==e.status?"Internal Server Error [500].":"parsererror"===t?"Requested JSON parse failed.":"timeout"===t?"Time out error.":"abort"===t?"Ajax request aborted.":"Uncaught Error.\n"+e.responseText,Toast.fire({type:"error",title:a})}function loadingForm(e,t){$("#"+e).waitMe({effect:t,text:"Please wait...",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",waitTime:-1,textPos:"vertical",fontSize:"100%",source:"",onClose:function(){}})}function hideLoadingForm(e){$("#"+e).waitMe("hide")}function openModalForm(){return modalForm.modal({backdrop:"static",keyboard:!1})}function Scrollmodal(){return modalDialog.addClass("modal-dialog-scrollable")}function mergeArrayObjects(e,t,a,n,o){return e.map((e,i)=>{if(e.row===t[i].row||e.row===a[i].row||e.row===n[i].row||e.row===o[i].row)return Object.assign({},e,t[i],a[i],n[i],o[i])})}function removeDuplicates(e,t){return[...new Map(e.map(e=>[t(e),e])).values()]}const ADMIN="/backend/";let ID,_table,setSave,ul,ORI_URL=window.location.origin,SITE_URL=window.location.href,LAST_URL=SITE_URL.substr(SITE_URL.lastIndexOf("/")+1),ADMIN_URL=ORI_URL+ADMIN,option=[];const SHOWALL="/showAll",CREATE="/create",SHOW="/show/",EDIT="/edit",DELETE="/destroy/";let cardMain=$(".card-main"),cardForm=$(".card-form"),cardBtn=$(".card-button"),cardTitle=$(".card-title");const modalForm=$(".modal_form"),modalDialog=$(".modal-dialog"),modalTitle=$(".modal-title"),modalBody=$(".modal-body");_table=$(".tb_display").DataTable({ajax:SITE_URL+SHOWALL,processing:!0,language:{processing:'<i class="fas fa-spinner fa-spin fa-1x fa-fw"></i><span> Processing...</span>'},columnDefs:[{targets:-1,orderable:!1},{targets:0,visible:!1}],autoWidth:!1,scrollX:!0});let _tablePro=$(".tb_product").DataTable({processing:!0,serverSide:!0,ajax:{url:SITE_URL+SHOWALL,type:"POST"},columnDefs:[{targets:-1,orderable:!1},{targets:0,visible:!1}],order:[],autoWidth:!1,scrollX:!0,scrollY:"400px",scrollCollapse:!0,fixedColumns:{rightColumns:checkRight(),leftColumns:checkLeft()}});$(".tb_tree").treeFy({initState:"expanded",treeColumn:0,collapseAnimateCallback:function(e){e.fadeOut()},expandAnimateCallback:function(e){e.fadeIn()}}),$(".save_form").click(function(e){const t=$(e.target).closest(".row"),a=t.find("form");let n;cardForm=t.find(".card-form");const o=a.find("input, select, textarea");for(let e=0;e<o.length;e++)""!==o[e].name&&a.find("input:checkbox[name="+o[e].name+"], select[name="+o[e].name+"]").removeAttr("disabled");let i=new FormData(a[0]);"add"===setSave?n=SITE_URL+CREATE:(i.append("id",ID),n=SITE_URL+EDIT);for(let e=0;e<o.length;e++)if(""!==o[e].name){if("radio"==o[e].type&&o[e].checked&&i.append(o[e].name,o[e].value),"file"==o[e].type&&o[e].className.includes("control-upload-image"))if(o[e].files.length>0)i.append(o[e].name,o[e].files[0]);else{let t,n=a.find(".img-result").attr("src");t=""!==n?n.substr(n.lastIndexOf("/")+1):n,i.append(o[e].name,t)}(a.find("textarea.summernote[name="+o[e].name+"]").length>0||a.find("textarea.summernote-product[name="+o[e].name+"]").length>0)&&$("[name ="+o[e].name+"]").summernote("isEmpty")&&i.append(o[e].name,"")}if(a.find("table.tb_tree").length>0){const e=a.find("table.tb_tree"),t=e.find("td input:checkbox");let n=[],o=[],r=[],l=[],s=[];$.each(t,function(){let e,t=$(this).parent().parent().parent().parent().index(),a=$(this).attr("name"),i=$(this).val(),d=$(this).attr("data-menu"),c=void 0!==$(this).attr("id")?$(this).attr("id"):0;e=$(this).is(":checked")?"Y":"N","isview"==a?n.push({row:t,view:e,menu_id:i,menu:d}):"iscreate"==a?o.push({row:t,create:e,menu_id:i,menu:d}):"isupdate"==a?r.push({row:t,update:e,menu_id:i,menu:d}):"isdelete"==a&&l.push({row:t,delete:e,menu_id:i,menu:d}),"add"!==setSave&&s.push({row:t,access_id:c})}),s=removeDuplicates(s,e=>e.row);let d=mergeArrayObjects(n,o,r,l,s);i.append("roles",JSON.stringify(d))}$.ajax({url:n,type:"POST",data:i,processData:!1,contentType:!1,cache:!1,dataType:"JSON",beforeSend:function(){$(".save_form").prop("disabled",!0),$(".x_form").prop("disabled",!0),$(".close_form").prop("disabled",!0),loadingForm(a.prop("id"),"facebook")},complete:function(){$(".save_form").removeAttr("disabled"),$(".x_form").removeAttr("disabled"),$(".close_form").removeAttr("disabled"),hideLoadingForm(a.prop("id"))},success:function(t){if(t[0].success){if(Toast.fire({type:"success",title:t[0].message}),clearForm(e),cardForm.prop("classList").contains("modal"))modalForm.modal("hide");else{const e=cardForm.closest(".container"),t=e.find(".card-body");$.each(t,function(e,t){let a=t.className.split(/\s+/);if(a.includes("card-main")){$(this).css("display","block");let e=ul.find("li");$.each(e,function(e,t){e>2&&t.remove()})}a.includes("card-form")&&$(this).css("display","none")}),cardBtn.css("display","none");const a=e.find(".card-header"),n=a.find("button").prop("classList");n.contains("new_form")&&a.find("button").css("display","block")}cardTitle.html(capitalize(LAST_URL)),reloadTable()}else t[0].error?(errorForm(a,t),$("html, body").animate({scrollTop:$(".container").offset().top},1500)):Toast.fire({type:"error",title:t[0].message})},error:function(e,t){showError(e,t)}});for(let e=0;e<o.length;e++)if(""!==o[e].name){let t=o[e].className.split(/\s+/);a.find("input.active").is(":checked")?a.find("input:checkbox[name="+o[e].name+"], select[name="+o[e].name+"]").removeAttr("disabled"):t.includes("active")||a.find("input:checkbox[name="+o[e].name+"], select[name="+o[e].name+"]").prop("disabled",!0)}}),$(document).on("click",".x_form, .close_form",function(e){let t=$(e.currentTarget);if("modal"!==t.attr("data-dismiss")){const e=t.closest(".container"),a=e.find(".card-body");$.each(a,function(e,t){let a=t.className.split(/\s+/);if(a.includes("card-main")){$(this).css("display","block");let e=ul.find("li");$.each(e,function(e,t){e>2&&t.remove()})}a.includes("card-form")&&$(this).css("display","none")}),cardBtn.css("display","none");const n=e.find(".card-header"),o=n.find("button").prop("classList");o.contains("new_form")&&n.find("button").css("display","block")}clearForm(e),cardTitle.html(capitalize(LAST_URL)),$("html, body").animate({scrollTop:$(".main-panel").offset().top},500)}),$(".new_form").click(function(e){const t=$(e.target).closest(".container"),a=t.find(".card-body");let n;$.each(a,function(o,i){let r=i.className.split(/\s+/);if(a.length>1){if(r.includes("card-main")){$(this).css("display","none");const e=t.find(".page-header");ul=e.find("ul.breadcrumbs"),ul.find("li.nav-item > a").attr("href",SITE_URL);let a='<li class="separator"><i class="flaticon-right-arrow"></i></li>';a+='<li class="nav-item"><a class="text-primary font-weight-bold">Create</a></li>',ul.append(a)}r.includes("card-form")&&($(e.target).css("display","none"),$(this).css("display","block"),cardBtn.css("display","block"),cardTitle.html("New "+capitalize(LAST_URL)),n=$(this).find("form"),n.find("input:file.control-upload-image").length>0&&n.find(".img-result").attr("src",""))}else openModalForm(),Scrollmodal(),modalTitle.html("New1 "+capitalize(LAST_URL)),n=modalForm.find("form"),n.find("input:file.control-upload-image").length>0&&n.find(".img-result").attr("src","")}),n.find('input[type="checkbox"].active').prop("checked",!0),setSave="add"}),$("input.active:checkbox").change(function(e){const t=$(this).closest("form"),a=t.find("input, textarea, select");let n;if($(this).is(":checked"))for(let e=0;e<a.length;e++)""!==a[e].name&&(n=a[e].className.split(/\s+/),t.find("input:text[name="+a[e].name+"], textarea[name="+a[e].name+"]").removeAttr("readonly"),"text"===a[e].type||n.includes("active")||(t.find("input:checkbox[name="+a[e].name+"], select[name="+a[e].name+"]").removeAttr("disabled"),"file"===a[e].type&&(t.find("input[name="+a[e].name+"]").removeAttr("disabled"),t.find("button.close-img").removeAttr("disabled").css("display","block"))),(t.find("textarea.summernote[name="+a[e].name+"]").length>0||t.find("textarea.summernote-product[name="+a[e].name+"]").length>0)&&$("[name ="+a[e].name+"]").summernote("enable"));else for(let e=0;e<a.length;e++)""!==a[e].name&&(n=a[e].className.split(/\s+/),t.find("input:text[name="+a[e].name+"], textarea[name="+a[e].name+"]").prop("readonly",!0),"text"===a[e].type||n.includes("active")||(t.find("input:checkbox[name="+a[e].name+"], select[name="+a[e].name+"]").prop("disabled",!0),"file"===a[e].type&&(t.find("input[name="+a[e].name+"]").prop("disabled",!0),t.find("button.close-img").prop("disabled",!0).css("display","none"))),(t.find("textarea.summernote[name="+a[e].name+"]").length>0||t.find("textarea.summernote-product[name="+a[e].name+"]").length>0)&&$("[name ="+a[e].name+"]").summernote("disable"))}),$(".close-img").click(function(e){const t=$(e.currentTarget).closest("div"),a=t.closest(".form-group"),n=a.find(".form-upload"),o=$(e.currentTarget).closest("form"),i=o.find("input");let r=t.find("label").prop("className");if(r.includes("form-result")){n.find("label").css("display","block"),t.find("label").css("display","none"),n.find("input:file").val(""),t.find(".img-result").attr("src","");for(let e=0;e<i.length;e++)""!==i[e].name&&"file"===i[e].type&&(o.find("input[name="+i[e].name+"]").removeAttr("disabled"),t.find("button.close-img").removeAttr("disabled").css("display","block"))}});const capitalize=e=>"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1);$(document).ready(function(e){$(".select2").select2({placeholder:"Select an option",width:"100%",theme:"bootstrap"}),$(".number").on("keypress keyup blur",function(e){$(this).val($(this).val().replace(/[^\d].+/,"")),(e.which<48||e.which>57)&&e.preventDefault()}),Toast=Swal.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:4e3}),$(".datepicker").datetimepicker({format:"YYYY-MM-DD"}),$(".timepicker").datetimepicker({format:"H:mm:ss"}),$(".summernote").summernote({fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Times New Roman"],tabsize:2,height:200,toolbar:[["style",["style","bold","italic","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["view",["fullscreen","codeview","help"]],["height",["height"]]],placeholder:"write here..."}),$(".summernote-product").summernote({fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Times New Roman"],tabsize:2,height:200,toolbar:[["style",["style","bold","italic","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["height",["height"]]],placeholder:"write here..."}),$(".float-number").autoNumeric("init",{aSep:",",mDec:"0"})}),$(document).ready(function(e){const t=$(".form");if(t.length>0){const e=t.prop("classList");if(!arrContains("form_page",e)){let a=t.find("input.id:hidden");ID=a.val();const n=t.find("input, textarea, select");let o=SITE_URL+SHOW+ID;setSave="update",$.ajax({url:o,type:"GET",async:!1,cache:!1,dataType:"JSON",beforeSend:function(){$(".save_form").attr("disabled",!0),loadingForm(t.find("form").attr("id"),"facebook")},complete:function(){$(".save_form").removeAttr("disabled"),hideLoadingForm(t.find("form").attr("id"))},success:function(a){cardTitle.html(capitalize(LAST_URL));for(let o=0;o<a.length;o++){let i=a[o].field,r=a[o].label;for(let t=0;t<e.length;t++)"show"===e[t].toLowerCase()&&"title"===i?modalTitle.html(capitalize(r)):"title"===i&&cardTitle.html(capitalize(r));for(let e=0;e<n.length;e++)n[e].name===i&&(t.find("input:text[name="+n[e].name+"], textarea[name="+n[e].name+"]").val(r),t.find("select[name="+n[e].name+"]").val(r).change())}}})}}}),$("select").change(function(e){let t=$(e.target),a="";if(0==option.length){if("md_principal_id"===t.attr("id")){a=t.val(),url=SITE_URL+"/getCategory";for(let e=1;e<=3;e++)$('[name = "category'+e+'"]').empty(),$.ajax({url:url,type:"POST",data:{principal:a,level:e},cache:!1,dataType:"JSON",success:function(t){if($('[name = "category'+e+'"]').append('<option selected="selected" value="">Category'+e+" < /option>"),t[0].success){let a=t[0].message;$.each(a,function(t,a){let n=a.md_category_id,o=(a.category,a.category_en);$('[name = "category'+e+'"]').append('<option value="'+n+'">'+o+"</option>")})}else Swal.fire({type:"error",title:t[0].message,showConfirmButton:!1,timer:1500})},error:function(e,t){showError(e,t)}})}}else{url=SITE_URL+"/getCategory";let e=option[option.length-1],t=e.fieldName,n=e.value;if(a=$(".main-select").val(),"category"===t.slice(0,-1)){let e=t[t.length-1];$("[name ="+t+"]").empty(),$.ajax({url:url,type:"POST",data:{principal:a,level:e},cache:!1,dataType:"JSON",success:function(e){if($("[name ="+t+"]").append('<option selected="selected" value="">'+option+"< /option>"),e[0].success){let a=e[0].message;$.each(a,function(e,a){let o=a.md_category_id,i=a.category_en;n==o?$("[name ="+t+"]").append('<option value="'+o+'" selected>'+i+"</option>"):$("[name ="+t+"]").append('<option value="'+o+'">'+i+"</option>")}),option=[]}else Swal.fire({type:"error",title:e[0].message,showConfirmButton:!1,timer:1500})},error:function(e,t){showError(e,t)}})}}}),$(document).on("click","input:checkbox",function(){const e=$(this).closest("table"),t=$(this).closest("tr");let a,n=$(this).closest("th").index(),o=$(this).parent().parent().parent().index(),i=o+1;$(this).is(":checked")?(n>0&&e.find("td:nth-child("+i+") input:checkbox").prop("checked",!0),(t.hasClass("treetable-expanded")||t.hasClass("treetable-collapsed"))&&(a=t.attr("data-node").substring(10),e.find("tr[data-pnode=treetable-parent-"+a+"] td:nth-child("+i+") input:checkbox").prop("checked",!0))):(n>0&&e.find("td:nth-child("+i+") input:checkbox").prop("checked",!1),(t.hasClass("treetable-expanded")||t.hasClass("treetable-collapsed"))&&(a=t.attr("data-node").substring(10),e.find("tr[data-pnode=treetable-parent-"+a+"] td:nth-child("+i+") input:checkbox").prop("checked",!1)))});